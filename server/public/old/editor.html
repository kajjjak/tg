<!DOCTYPE html>
<!--https://www.mapbox.com/mapbox.js/example/v1.0.0/divicon/-->
<!-- http://chimera.labs.oreilly.com/books/1234000001654/ch04.html#resizing_an_image_painted_to_the_canvas -->
<!-- http://gamedevelopment.tutsplus.com/articles/great-full-game-sprite-sheets-from-graphicriver--gamedev-3797   -->
<!-- http://2dgameartforprogrammers.blogspot.com/2011/12/game-assets.html  -->
<!-- http://opengameart.org/content/tanks-top-down-ww2 -->
<html>
<head>
<meta charset=utf-8 />
  <title>Urban Battle Map - Editor</title>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
  <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
  <!--<link rel="stylesheet" href="stylesheets/actors.css" type="text/css" media="all" />-->
 
  <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
  <!--<link rel="stylesheet" href="stylesheets/actors.css" type="text/css" media="all" />-->
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
  <script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

  <script src="vendor/jsoneditor-min.js" type="text/javascript" charset="utf-8"></script>
  <link rel="stylesheet" href="vendor/jsoneditor-min.css">

  <link rel="stylesheet" href="stylesheets/actors.css">
  <link rel="stylesheet" href="stylesheets/gui.css">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

  <!-- Optional theme -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

  <!-- Latest compiled and minified JavaScript -->
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="vendor/jsoneditor-min.js" type="text/javascript" charset="utf-8"></script>
  <link rel="stylesheet" href="vendor/jsoneditor-min.css">
  <script src="vendor/howler.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="vendor/fastclick.min.js" type="text/javascript" charset="utf-8"></script>
  
  <!-- game play scripts begin -->
  <script src="scripts/utils/utils.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/utils/soundmanager.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/config/lang.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/utils/mglutils.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/utils/mgl.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/config/main.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/config/soundmap.js" type="text/javascript" charset="utf-8"></script>
  <!-- game play scripts ends -->  

  <!-- game play scripts begin --
  <script src="/media/images/defensemap/scripts/soundmanager.js" type="text/javascript" charset="utf-8"></script>
  <script src="/media/images/defensemap/scripts/game_lang.js" type="text/javascript" charset="utf-8"></script>
  <script src="/media/images/defensemap/scripts/mglutils.js" type="text/javascript" charset="utf-8"></script>
  <script src="/media/images/defensemap/scripts/mgl.js" type="text/javascript" charset="utf-8"></script>
  <script src="/media/images/defensemap/scripts/main.js" type="text/javascript" charset="utf-8"></script>
  <!-- game play scripts ends -->  

  <style>
body {
  padding-top: 50px;
}
.content_container {
  padding: 40px 15px;
}  
  </style>
</head>
<body>

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Urban Battle Map editor</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li id="sound_menu_item" class="active"><a href="#sound" onclick="setNavigation()">Sound</a></li>
            <li id="state_menu_item"><a class="" href="#state" onclick="setNavigation()">State</a></li>
            <li id="state_menu_item"><a class="" href="#battle" onclick="setNavigation()">Battle</a></li>
            <li id="state_menu_item"><a class="" href="#users" onclick="setNavigation()">Users</a></li>
            <li id="state_menu_item"><a class="" href="index.html">Play</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

      <div class="content_container" id="sound" style="display:block;">
        <h1>Sound</h1>
        <p class="lead">The sound editor allows the sound designer to customise the audio of the game.</p>
        <p>Game events trigger sound to be played. On this page you can fully define and map what sounds to play when a the events occur. 
        <p>Features</p>
        <ul>
            <li>Adding new sounds definitions requires reloading page</li>
            <li>Changes to looping tracks need to reload page to take effect</li>
            <li>Changes to sounds are saved directly to game</li>
            <li>Changes are stored localy and must be sent to developer</li>
            <li>Changes take some seconds to take effect</li>
            <li>Messing up the structure and your are screwed (do local backups)</li>
        </ul>
        <h4>Tracks</h4>
        <p>Sound tracks is an reusable sound configurations that have these properties.</p>
        <div class="row">
          <div class="col-md-6">
            <div id="dialog-modal-soundtrack-editor_tracks" style="width: 100%; height: 500px;"></div>
          </div>
          <div class="col-md-6">
            <p>Sound tracks is an reusable sound configurations that have these properties.</p>
            <dl>
              <dt>important</dt><dd>If this track will be played within a short while when game is loaded set this boolean value to true. Tracks where this is not defined or false will be loaded with a delay (default 2 seconds).</dd>
              <dt>file</dt><dd>Which is the sound file used (excluding the file extension)</dd>
              <dt>loop</dt><dd>True or false if it should loop</dd>
              <dt>volume</dt><dd>This track sound volume (value: 0.0-1.0)</dd>
              <dt>rate</dt><dd>This track playback rate. This can also be an object with properties (from and to) denoting random range to select during playback.</dd>
              <dt>stream</dt><dd>Set to true of this is a long audio file</dd>
              <dt>max_instance_count</dt><dd>Max playing instances playing at once. Will ignore this attribute if sound track is looping.</dd>
              <dt>playback</dt>
                <dd>
                  Allows you to control how the track starts playing. The values that control this are objects having these values.
                  <ul>
                    <li>fadein<ul><li>to: is the volume that we fade into</li><li>duration: is the time in milliseconds</li></ul></li>
                    <li>rate_range: random select rate range during playback (overrides rate)<ul><li>from: is a value between 0 and 1</li><li>to: is a value between 0 and 1</li></ul></li>                    
                  </ul>
                </dd>
            </dl>
            <hr>            
            <div class="row">
              <div class="col-md-6"><button onclick="saveSoundTrack()">save</button><button onclick="playSoundTrack()">play</button></div>
              <div class="col-md-6"><select id="sound_tracks"></select></div>
            </div>
          </div>
        </div>


        <h4>Playlist</h4>
        <p>Playlist are lists of tracks.</p>
        <div class="row">
          <div class="col-md-6">
            <div id="dialog-modal-soundtrack-editor_lists" style="width: 100%; height: 500px;"></div>
          </div>
          <div class="col-md-6">
            <dl>
            <dt>start_track</dt>
            <dd>Is the track that will be played when the playlist starts. Note that the start track uses the track configuration (loop, fadein, volume, ...)
            </dd>
            <dt>selection</dt>
            <dd>Either "sequential" or "random". is the selection method used when looking for next track to play
              <ul>
                <li>random: will select a random sound (trying to randomize again if selected again)</li>
                <li>sequential: will select next file in line (and start from beginning if all files have been played)</li>
              </ul>
            </dd>
            <dt>loop</dt>
            <dd>Either true or false. Denotes if the playlist should continue playing after all the files has been played
              <ul>
                <li>true: will play another sound when previus sound has stopped playing using selection method</li>
                <li>false: will play a single file using the selection method</li>
              </ul>
            </dd>
            <dt>delay</dt>
            <dd>
              Either an integer or an object having values to and from. Is the delay before playing next song
              <ul>
                <li>is an integer value denoting the time we will delay playing the next file</li>
              </ul>
              Or an object having to and from value
              <ul>
                <li>from: is an integer value meaning that this is the mininum time we randomly select from</li>
                <li>to: is an integer value meaning that this is the maximum time we randomly select from</li>
              </ul>
            </dd>
            <dt>tracks</dt>
            <dd>
                Is a array of tracks that has been defined in tracks. Note that the tracks options will also apply (allowing for fadeIns) 
            </dd>           
            </dl>
            <hr>
            <div class="row">
              <div class="col-md-6"><button onclick="saveSoundList()">save</button><button onclick="playSoundList()">play</button></div>
              <div class="col-md-6"><select id="sound_lists"></select></div>
            </div>
          </div>
        </div>
        <h4>Events</h4>
        <p>Sound events are actions triggered by the game engine to play a sound file. All events should be mapped to a sound track or playlist.</p>
        <div class="row">
          <div class="col-md-6">
            Event name<br>
            <select id="sound_trigger"></select>
          </div>
          <div class="col-md-6">
            Playing track/playlist<br>
            <select id="sound_played"></select>
          </div>
        </div>
        <div class="row">
          <h1>Done</h1>
          <p class="lead">Want to save data to server?</p>
          <p>Then simply JSONfy and send the content to the developer.</p>

          <textarea id="text_area" rows="5" cols="20" wrap="hard" style="width:100%;height:100px"></textarea>
          <br><br>
          <center><button onclick="copyData(3)">JSONfy</button></center>
          <br>
        </div>
      </div><!-- /.container -->

      <div class="content_container" id="battle" style="display:none;">

        <h1>Battle management</h1>
        <p class="lead">Loading and saving game battle allows game designer to re-try game mechanics</p>
        You can save any battle that is currently in progress or has ended. When you reload the browser this battle can be replayed by the developer.<br><br><br>
        <div class="row">          
          <div class="col-md-6">
            <button onclick="saveBattleLocation()">save battle</button>
          </div>
          <div class="col-md-6">
            <button onclick="clearBattleLocation()">clear battle</button>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <h4>Defender</h4>
            <p>General properties that effect the behavior of defender (which will effect all levels of the actor type).</p>          
            <div id="dialog-modal-battle-editor_defender" style="width: 100%; height: 500px;"></div>
          </div>
          <div class="col-md-6">
            <br><br><br><br><br>
            <button onclick="saveBattleDefender()">save</button><button onclick="clearBattleDefender()">disable</button>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <h4>Attacker</h4>
            <p>General properties that effect the behavior of attacker (which will effect all).</p>          
            <div id="dialog-modal-battle-editor_attacker" style="width: 100%; height: 500px;"></div>
          </div>
          <div class="col-md-6">
            <br><br><br><br><br>
            <button onclick="saveBattleAttacker()">save</button><button onclick="clearBattleAttacker()">disable</button>
          </div>
        </div>
      </div>
    </div><!-- /.container -->

      <div class="content_container" id="users" style="display:none;">

        <h1>User management</h1>
        <p class="lead">Manage users</p>
        tests<br><br><br>
        <div class="row">          
          <div class="col-md-6">
            <button onclick="saveBattleLocation()">save battle</button>
          </div>
          <div class="col-md-6">
            <button onclick="clearBattleLocation()">clear battle</button>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <h4>Defender</h4>
            <p>General properties that effect the behavior of defender (which will effect all levels of the actor type).</p>          
            <div id="dialog-modal-battle-editor_defender" style="width: 100%; height: 500px;"></div>
          </div>
          <div class="col-md-6">
            <br><br><br><br><br>
            <button onclick="saveBattleDefender()">save</button><button onclick="clearBattleDefender()">disable</button>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <h4>Attacker</h4>
            <p>General properties that effect the behavior of attacker (which will effect all).</p>          
            <div id="dialog-modal-battle-editor_attacker" style="width: 100%; height: 500px;"></div>
          </div>
          <div class="col-md-6">
            <br><br><br><br><br>
            <button onclick="saveBattleAttacker()">save</button><button onclick="clearBattleAttacker()">disable</button>
          </div>
        </div>
      </div>
    </div><!-- /.container -->    


      <div class="content_container" id="state" style="display:none;">

        <h1>State management</h1>
        <p class="lead">Loading and saving game states allows game designer to re-try game mechanics</p>

        <div class="row">
          <div class="col-md-6">
            <button onclick="saveState()">save state</button>
          </div>
          <div class="col-md-6">
            <input type="text" id="state_name">
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <button onclick="loadState()">load state</button>
            <br><br>
            <button onclick="resetGame()">reset game</button>

          </div>
          <div class="col-md-6">
            <select id="states"></select>
          </div>
        </div>
      </div>
    </div><!-- /.container -->


<!-- scripts starts -->
<script src="scripts/dev/editor.js" type="text/javascript" charset="utf-8"></script>
<!-- <script src="/media/images/defensemap/scripts/game_editor.js" type="text/javascript" charset="utf-8"></script> -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  if(ga){
    ga('create', 'UA-30724037-3', 'auto');
    ga('send', 'pageview');
  }

</script>
</body>
</html>
